{% extends "base.html" %}

{% block content %}
  <h2>æ¡ˆä»¶åˆ—è¡¨</h2>

  <form method="GET" action="{% url 'case_list' %}">
    <input type="text" name="q" value="{{ query }}" placeholder="è¼¸å…¥æœå°‹é—œéµå­—">
	
    <label for="sort_order">æ’åºæ–¹å¼ï¼š</label>
    <select name="sort_order" id="sort_order">
        <option value="-created_at" {% if sort_order == "-created_at" %}selected{% endif %}>æœ€æ–°å„ªå…ˆ</option>
        <option value="created_at" {% if sort_order == "created_at" %}selected{% endif %}>æœ€èˆŠå„ªå…ˆ</option>
    </select>	
	
    <button type="submit">æœå°‹</button>
  </form>

  {% if user.is_authenticated %}
    <a href="{% url 'add_case' %}">æ–°å¢æ¡ˆä»¶</a>
  {% endif %}

  <ul>
    {% for case in cases %}
      <li>
        <a href="{% url 'case_detail' case.id %}"><strong>æ¡ˆä»¶è™Ÿç¢¼ï¼š</strong> {{ case.case_number }}</a><br>
        <strong>éƒ¨é–€ï¼š</strong> {{ case.department }}<br>
        <strong>ç‹€æ…‹ï¼š</strong> {{ case.status }}<br>
		<strong>å»ºç«‹æ—¥æœŸï¼š</strong> {{ case.created_at|date:"Y-m-d H:i" }}  <!-- ğŸ”¹ é¡¯ç¤ºæ—¥æœŸ -->
        <br>
        {% if user.is_authenticated %}
          <a href="{% url 'edit_case' case.id %}">ç·¨è¼¯</a>
        {% endif %}
      </li>
      <hr>
	{% empty %}
      <p>æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„æ¡ˆä»¶</p>
    {% endfor %}
  </ul>
{% endblock %}
